{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Button,Row,Col,ListGroup,Image,Card,ListGroupItem}from'react-bootstrap';import{Link}from'react-router-dom';import{useDispatch,useSelector}from'react-redux';import Message from'../components/Message';import CheckoutSteps from'../components/CheckouSteps';import{createOrder}from'../actions/orderAction';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var PlaceOrderScreen=function PlaceOrderScreen(_ref){var history=_ref.history;var dispatch=useDispatch();var cart=useSelector(function(state){return state.cart;});// console.log(cart.cartItems)\ncart.itemsPrice=cart.cartItems.reduce(function(acc,item){return acc+item.price*item.qty;},0);// console.log(cart.cartItems)\ncart.shippingPrice=cart.itemsPrice>500?0:100;cart.taxPrice=Math.floor(cart.itemsPrice*15/100);cart.totalPrice=cart.taxPrice+cart.itemsPrice+cart.shippingPrice;var orderCreate=useSelector(function(state){return state.orderCreate;});var order=orderCreate.order,success=orderCreate.success,error=orderCreate.error;console.log('Order '+order);useEffect(function(){if(success){history.push(\"/order/\".concat(order._id));}//eslint-disable-next-line\n},[history,success]);var placeOrderHandler=function placeOrderHandler(e){dispatch(createOrder({orderItems:cart.cartItems,shippingAddress:cart.shippingAddress,paymentMethod:cart.paymentMethod,itemsPrice:cart.itemsPrice,shippingPrice:cart.shippingPrice,taxPrice:cart.taxPrice,totalPrice:cart.totalPrice}));console.log('Successfully Ordered');};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(CheckoutSteps,{step1:true,step2:true,step3:true,step4:true}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:8,children:/*#__PURE__*/_jsxs(ListGroup,{variant:\"flush\",children:[/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Shipping\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Address:\"}),cart.shippingAddress.address,\", \",cart.shippingAddress.city,\",\",cart.shippingAddress.postalCode,\",\",' ',cart.shippingAddress.country]})]}),/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Payment Method: \"}),/*#__PURE__*/_jsx(\"strong\",{children:cart.paymentMethod})]}),/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Order Items: \"}),cart.cartItems.length===0?/*#__PURE__*/_jsx(Message,{children:\"Your Cart is Empty\"}):/*#__PURE__*/_jsx(ListGroup,{children:cart.cartItems.map(function(item,index){return/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsx(Image,{src:item.image,alt:item.name,fluid:true,rounded:true})}),/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsx(Link,{to:\"/product/\".concat(item.product),children:item.name})}),/*#__PURE__*/_jsxs(Col,{md:4,children:[item.price,\" X \",item.qty,\" = \\u20B9\",Math.floor(item.price*item.qty)]})]})},index);})})]})]})}),/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(ListGroup,{veriant:\"flush\",children:[/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsx(\"h2\",{children:\"Order Summary: \"})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:\"Items:\"}),/*#__PURE__*/_jsxs(Col,{children:[\"\\u20B9\",Math.floor(cart.itemsPrice)]})]})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:\"Shipping:\"}),/*#__PURE__*/_jsxs(Col,{children:[\"\\u20B9\",Math.floor(cart.shippingPrice)]})]})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:\"Tax:\"}),/*#__PURE__*/_jsxs(Col,{children:[\"\\u20B9\",Math.floor(cart.taxPrice)]})]})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:\"Total:\"}),/*#__PURE__*/_jsxs(Col,{children:[\"\\u20B9\",Math.floor(cart.totalPrice)]})]})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:error&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsx(Button,{type:\"button\",className:\"btn-block\",disabled:cart.cartItems.length===0,onClick:placeOrderHandler,children:\"Place Order\"})})]})})})]})]});};export default PlaceOrderScreen;","map":{"version":3,"sources":["C:/Users/ABHIJIT/OneDrive/Desktop/E_Commers/frontend/src/Screen/PlaceOrderScreen.js"],"names":["React","useState","useEffect","Button","Row","Col","ListGroup","Image","Card","ListGroupItem","Link","useDispatch","useSelector","Message","CheckoutSteps","createOrder","PlaceOrderScreen","history","dispatch","cart","state","itemsPrice","cartItems","reduce","acc","item","price","qty","shippingPrice","taxPrice","Math","floor","totalPrice","orderCreate","order","success","error","console","log","push","_id","placeOrderHandler","e","orderItems","shippingAddress","paymentMethod","address","city","postalCode","country","length","map","index","image","name","product"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport {\r\n  Button,\r\n  Row,\r\n  Col,\r\n  ListGroup,\r\n  Image,\r\n  Card,\r\n  ListGroupItem,\r\n} from 'react-bootstrap'\r\nimport { Link } from 'react-router-dom'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport Message from '../components/Message'\r\nimport CheckoutSteps from '../components/CheckouSteps'\r\nimport { createOrder } from '../actions/orderAction'\r\n\r\nconst PlaceOrderScreen = ({ history }) => {\r\n  const dispatch = useDispatch()\r\n  const cart = useSelector((state) => state.cart)\r\n  // console.log(cart.cartItems)\r\n  cart.itemsPrice = cart.cartItems.reduce(\r\n    (acc, item) => acc + item.price * item.qty,\r\n    0\r\n  )\r\n  // console.log(cart.cartItems)\r\n  cart.shippingPrice = cart.itemsPrice > 500 ? 0 : 100\r\n  cart.taxPrice = Math.floor((cart.itemsPrice * 15) / 100)\r\n  cart.totalPrice = cart.taxPrice + cart.itemsPrice + cart.shippingPrice\r\n\r\n  const orderCreate = useSelector((state) => state.orderCreate)\r\n  const { order, success, error } = orderCreate\r\n\r\n  console.log('Order ' + order)\r\n  useEffect(() => {\r\n    if (success) {\r\n      history.push(`/order/${order._id}`)\r\n    }\r\n    //eslint-disable-next-line\r\n  }, [history, success])\r\n  const placeOrderHandler = (e) => {\r\n    dispatch(\r\n      createOrder({\r\n        orderItems: cart.cartItems,\r\n        shippingAddress: cart.shippingAddress,\r\n        paymentMethod: cart.paymentMethod,\r\n        itemsPrice: cart.itemsPrice,\r\n        shippingPrice: cart.shippingPrice,\r\n        taxPrice: cart.taxPrice,\r\n        totalPrice: cart.totalPrice,\r\n      })\r\n    )\r\n    console.log('Successfully Ordered')\r\n  }\r\n  return (\r\n    <>\r\n      <CheckoutSteps step1 step2 step3 step4 />\r\n      <Row>\r\n        <Col md={8}>\r\n          <ListGroup variant='flush'>\r\n            <ListGroup.Item>\r\n              <h2>Shipping</h2>\r\n              <p>\r\n                <strong>Address:</strong>\r\n                {cart.shippingAddress.address}, {cart.shippingAddress.city},\r\n                {cart.shippingAddress.postalCode},{' '}\r\n                {cart.shippingAddress.country}\r\n              </p>\r\n            </ListGroup.Item>\r\n\r\n            <ListGroup.Item>\r\n              <h2>Payment Method: </h2>\r\n              <strong>{cart.paymentMethod}</strong>\r\n            </ListGroup.Item>\r\n\r\n            <ListGroup.Item>\r\n              <h2>Order Items: </h2>\r\n              {cart.cartItems.length === 0 ? (\r\n                <Message>Your Cart is Empty</Message>\r\n              ) : (\r\n                <ListGroup>\r\n                  {cart.cartItems.map((item, index) => (\r\n                    <ListGroup.Item key={index}>\r\n                      <Row>\r\n                        <Col md={2}>\r\n                          <Image\r\n                            src={item.image}\r\n                            alt={item.name}\r\n                            fluid\r\n                            rounded\r\n                          />\r\n                        </Col>\r\n                        <Col md={4}>\r\n                          <Link to={`/product/${item.product}`}>\r\n                            {item.name}\r\n                          </Link>\r\n                        </Col>\r\n                        <Col md={4}>\r\n                          {item.price} X {item.qty} = ₹\r\n                          {Math.floor(item.price * item.qty)}\r\n                        </Col>\r\n                      </Row>\r\n                    </ListGroup.Item>\r\n                  ))}\r\n                </ListGroup>\r\n              )}\r\n            </ListGroup.Item>\r\n          </ListGroup>\r\n        </Col>\r\n        <Col md={4}>\r\n          <Card>\r\n            <ListGroup veriant='flush'>\r\n              <ListGroup.Item>\r\n                <h2>Order Summary: </h2>\r\n              </ListGroup.Item>\r\n              <ListGroup.Item>\r\n                <Row>\r\n                  <Col>Items:</Col>\r\n                  <Col>₹{Math.floor(cart.itemsPrice)}</Col>\r\n                </Row>\r\n              </ListGroup.Item>\r\n              <ListGroup.Item>\r\n                <Row>\r\n                  <Col>Shipping:</Col>\r\n                  <Col>₹{Math.floor(cart.shippingPrice)}</Col>\r\n                </Row>\r\n              </ListGroup.Item>\r\n              <ListGroup.Item>\r\n                <Row>\r\n                  <Col>Tax:</Col>\r\n                  <Col>₹{Math.floor(cart.taxPrice)}</Col>\r\n                </Row>\r\n              </ListGroup.Item>\r\n              <ListGroup.Item>\r\n                <Row>\r\n                  <Col>Total:</Col>\r\n                  <Col>₹{Math.floor(cart.totalPrice)}</Col>\r\n                </Row>\r\n              </ListGroup.Item>\r\n              <ListGroup.Item>\r\n                {error && <Message variant='danger'>{error}</Message>}\r\n              </ListGroup.Item>\r\n              <ListGroup.Item>\r\n                <Button\r\n                  type='button'\r\n                  className='btn-block'\r\n                  disabled={cart.cartItems.length === 0}\r\n                  onClick={placeOrderHandler}\r\n                >\r\n                  Place Order\r\n                </Button>\r\n              </ListGroup.Item>\r\n            </ListGroup>\r\n          </Card>\r\n        </Col>\r\n      </Row>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default PlaceOrderScreen\r\n"]},"metadata":{},"sourceType":"module"}